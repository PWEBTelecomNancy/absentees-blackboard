__author__ = 'videl'
import datetime


class frtz(datetime.tzinfo):
    DST_OFFSET = datetime.timedelta(hours=+1)
    # In the US, DST starts at 2 am (standard time) on the last Sunday in March,
    # which is the first Sunday on or after March 25.
    DSTSTART = datetime.datetime(1, 3, 25, 2)
    # and ends at 3 am (DST time; 2am standard time) on the last Sunday of Oct.
    # which is the first Sunday on or after Oct 25.
    DSTEND = datetime.datetime(1, 10, 25, 1)

    def utcoffset(self, dt):
        return self.DST_OFFSET + self.dst(dt)

    def tzname(self, dt):
        return "Europe/France"

    def dst(self, dt):
        # Find last Sunday in March & the last in October.
        start = frtz.first_sunday_on_or_after(self.DSTSTART.replace(year=dt.year))
        end = frtz.first_sunday_on_or_after(self.DSTEND.replace(year=dt.year))

        if start <= dt.replace(tzinfo=None) < end:
            return datetime.timedelta(hours=1)
        else:
            return datetime.timedelta(0)

    @staticmethod
    def first_sunday_on_or_after(dt):
        days_to_go = 6 - dt.weekday()
        if days_to_go:
            dt += datetime.timedelta(days_to_go)
        return dt


_utc_transition_times = [
    datetime.datetime(1,1,1,0,0,0),
    datetime.datetime(1911,3,10,23,51,39),
    datetime.datetime(1916,6,14,23,0,0),
    datetime.datetime(1916,10,1,23,0,0),
    datetime.datetime(1917,3,24,23,0,0),
    datetime.datetime(1917,10,7,23,0,0),
    datetime.datetime(1918,3,9,23,0,0),
    datetime.datetime(1918,10,6,23,0,0),
    datetime.datetime(1919,3,1,23,0,0),
    datetime.datetime(1919,10,5,23,0,0),
    datetime.datetime(1920,2,14,23,0,0),
    datetime.datetime(1920,10,23,23,0,0),
    datetime.datetime(1921,3,14,23,0,0),
    datetime.datetime(1921,10,25,23,0,0),
    datetime.datetime(1922,3,25,23,0,0),
    datetime.datetime(1922,10,7,23,0,0),
    datetime.datetime(1923,5,26,23,0,0),
    datetime.datetime(1923,10,6,23,0,0),
    datetime.datetime(1924,3,29,23,0,0),
    datetime.datetime(1924,10,4,23,0,0),
    datetime.datetime(1925,4,4,23,0,0),
    datetime.datetime(1925,10,3,23,0,0),
    datetime.datetime(1926,4,17,23,0,0),
    datetime.datetime(1926,10,2,23,0,0),
    datetime.datetime(1927,4,9,23,0,0),
    datetime.datetime(1927,10,1,23,0,0),
    datetime.datetime(1928,4,14,23,0,0),
    datetime.datetime(1928,10,6,23,0,0),
    datetime.datetime(1929,4,20,23,0,0),
    datetime.datetime(1929,10,5,23,0,0),
    datetime.datetime(1930,4,12,23,0,0),
    datetime.datetime(1930,10,4,23,0,0),
    datetime.datetime(1931,4,18,23,0,0),
    datetime.datetime(1931,10,3,23,0,0),
    datetime.datetime(1932,4,2,23,0,0),
    datetime.datetime(1932,10,1,23,0,0),
    datetime.datetime(1933,3,25,23,0,0),
    datetime.datetime(1933,10,7,23,0,0),
    datetime.datetime(1934,4,7,23,0,0),
    datetime.datetime(1934,10,6,23,0,0),
    datetime.datetime(1935,3,30,23,0,0),
    datetime.datetime(1935,10,5,23,0,0),
    datetime.datetime(1936,4,18,23,0,0),
    datetime.datetime(1936,10,3,23,0,0),
    datetime.datetime(1937,4,3,23,0,0),
    datetime.datetime(1937,10,2,23,0,0),
    datetime.datetime(1938,3,26,23,0,0),
    datetime.datetime(1938,10,1,23,0,0),
    datetime.datetime(1939,4,15,23,0,0),
    datetime.datetime(1939,11,18,23,0,0),
    datetime.datetime(1940,2,25,2,0,0),
    datetime.datetime(1940,6,14,22,0,0),
    datetime.datetime(1942,11,2,1,0,0),
    datetime.datetime(1943,3,29,1,0,0),
    datetime.datetime(1943,10,4,1,0,0),
    datetime.datetime(1944,4,3,1,0,0),
    datetime.datetime(1944,8,24,22,0,0),
    datetime.datetime(1944,10,7,23,0,0),
    datetime.datetime(1945,4,2,1,0,0),
    datetime.datetime(1945,9,16,1,0,0),
    datetime.datetime(1976,3,28,0,0,0),
    datetime.datetime(1976,9,25,23,0,0),
    datetime.datetime(1977,4,3,1,0,0),
    datetime.datetime(1977,9,25,1,0,0),
    datetime.datetime(1978,4,2,1,0,0),
    datetime.datetime(1978,10,1,1,0,0),
    datetime.datetime(1979,4,1,1,0,0),
    datetime.datetime(1979,9,30,1,0,0),
    datetime.datetime(1980,4,6,1,0,0),
    datetime.datetime(1980,9,28,1,0,0),
    datetime.datetime(1981,3,29,1,0,0),
    datetime.datetime(1981,9,27,1,0,0),
    datetime.datetime(1982,3,28,1,0,0),
    datetime.datetime(1982,9,26,1,0,0),
    datetime.datetime(1983,3,27,1,0,0),
    datetime.datetime(1983,9,25,1,0,0),
    datetime.datetime(1984,3,25,1,0,0),
    datetime.datetime(1984,9,30,1,0,0),
    datetime.datetime(1985,3,31,1,0,0),
    datetime.datetime(1985,9,29,1,0,0),
    datetime.datetime(1986,3,30,1,0,0),
    datetime.datetime(1986,9,28,1,0,0),
    datetime.datetime(1987,3,29,1,0,0),
    datetime.datetime(1987,9,27,1,0,0),
    datetime.datetime(1988,3,27,1,0,0),
    datetime.datetime(1988,9,25,1,0,0),
    datetime.datetime(1989,3,26,1,0,0),
    datetime.datetime(1989,9,24,1,0,0),
    datetime.datetime(1990,3,25,1,0,0),
    datetime.datetime(1990,9,30,1,0,0),
    datetime.datetime(1991,3,31,1,0,0),
    datetime.datetime(1991,9,29,1,0,0),
    datetime.datetime(1992,3,29,1,0,0),
    datetime.datetime(1992,9,27,1,0,0),
    datetime.datetime(1993,3,28,1,0,0),
    datetime.datetime(1993,9,26,1,0,0),
    datetime.datetime(1994,3,27,1,0,0),
    datetime.datetime(1994,9,25,1,0,0),
    datetime.datetime(1995,3,26,1,0,0),
    datetime.datetime(1995,9,24,1,0,0),
    datetime.datetime(1996,3,31,1,0,0),
    datetime.datetime(1996,10,27,1,0,0),
    datetime.datetime(1997,3,30,1,0,0),
    datetime.datetime(1997,10,26,1,0,0),
    datetime.datetime(1998,3,29,1,0,0),
    datetime.datetime(1998,10,25,1,0,0),
    datetime.datetime(1999,3,28,1,0,0),
    datetime.datetime(1999,10,31,1,0,0),
    datetime.datetime(2000,3,26,1,0,0),
    datetime.datetime(2000,10,29,1,0,0),
    datetime.datetime(2001,3,25,1,0,0),
    datetime.datetime(2001,10,28,1,0,0),
    datetime.datetime(2002,3,31,1,0,0),
    datetime.datetime(2002,10,27,1,0,0),
    datetime.datetime(2003,3,30,1,0,0),
    datetime.datetime(2003,10,26,1,0,0),
    datetime.datetime(2004,3,28,1,0,0),
    datetime.datetime(2004,10,31,1,0,0),
    datetime.datetime(2005,3,27,1,0,0),
    datetime.datetime(2005,10,30,1,0,0),
    datetime.datetime(2006,3,26,1,0,0),
    datetime.datetime(2006,10,29,1,0,0),
    datetime.datetime(2007,3,25,1,0,0),
    datetime.datetime(2007,10,28,1,0,0),
    datetime.datetime(2008,3,30,1,0,0),
    datetime.datetime(2008,10,26,1,0,0),
    datetime.datetime(2009,3,29,1,0,0),
    datetime.datetime(2009,10,25,1,0,0),
    datetime.datetime(2010,3,28,1,0,0),
    datetime.datetime(2010,10,31,1,0,0),
    datetime.datetime(2011,3,27,1,0,0),
    datetime.datetime(2011,10,30,1,0,0),
    datetime.datetime(2012,3,25,1,0,0),
    datetime.datetime(2012,10,28,1,0,0),
    datetime.datetime(2013,3,31,1,0,0),
    datetime.datetime(2013,10,27,1,0,0),
    datetime.datetime(2014,3,30,1,0,0),
    datetime.datetime(2014,10,26,1,0,0),
    datetime.datetime(2015,3,29,1,0,0),
    datetime.datetime(2015,10,25,1,0,0),
    datetime.datetime(2016,3,27,1,0,0),
    datetime.datetime(2016,10,30,1,0,0),
    datetime.datetime(2017,3,26,1,0,0),
    datetime.datetime(2017,10,29,1,0,0),
    datetime.datetime(2018,3,25,1,0,0),
    datetime.datetime(2018,10,28,1,0,0),
    datetime.datetime(2019,3,31,1,0,0),
    datetime.datetime(2019,10,27,1,0,0),
    datetime.datetime(2020,3,29,1,0,0),
    datetime.datetime(2020,10,25,1,0,0),
    datetime.datetime(2021,3,28,1,0,0),
    datetime.datetime(2021,10,31,1,0,0),
    datetime.datetime(2022,3,27,1,0,0),
    datetime.datetime(2022,10,30,1,0,0),
    datetime.datetime(2023,3,26,1,0,0),
    datetime.datetime(2023,10,29,1,0,0),
    datetime.datetime(2024,3,31,1,0,0),
    datetime.datetime(2024,10,27,1,0,0),
    datetime.datetime(2025,3,30,1,0,0),
    datetime.datetime(2025,10,26,1,0,0),
    datetime.datetime(2026,3,29,1,0,0),
    datetime.datetime(2026,10,25,1,0,0),
    datetime.datetime(2027,3,28,1,0,0),
    datetime.datetime(2027,10,31,1,0,0),
    datetime.datetime(2028,3,26,1,0,0),
    datetime.datetime(2028,10,29,1,0,0),
    datetime.datetime(2029,3,25,1,0,0),
    datetime.datetime(2029,10,28,1,0,0),
    datetime.datetime(2030,3,31,1,0,0),
    datetime.datetime(2030,10,27,1,0,0),
    datetime.datetime(2031,3,30,1,0,0),
    datetime.datetime(2031,10,26,1,0,0),
    datetime.datetime(2032,3,28,1,0,0),
    datetime.datetime(2032,10,31,1,0,0),
    datetime.datetime(2033,3,27,1,0,0),
    datetime.datetime(2033,10,30,1,0,0),
    datetime.datetime(2034,3,26,1,0,0),
    datetime.datetime(2034,10,29,1,0,0),
    datetime.datetime(2035,3,25,1,0,0),
    datetime.datetime(2035,10,28,1,0,0),
    datetime.datetime(2036,3,30,1,0,0),
    datetime.datetime(2036,10,26,1,0,0),
    datetime.datetime(2037,3,29,1,0,0),
    datetime.datetime(2037,10,25,1,0,0)
]